{% extends "header.html" %}

{% block body %}
  <script src="{{ url_for('static', filename='node_modules/three/build/three.js')}}"></script>
  <script src="{{ url_for('static', filename='js/blankBg.js')}}"></script>

  <main class="mdl-layout__content">
    <div class="mdl-grid demo-blog__posts">

      {% for t in TOPIC_DICT["3D"] %}
        <div class="{{t[1]}} mdl-card mdl-cell mdl-cell--8-col mdl-cell--{{t[6]}}-col-desktop mdl-shadow--2dp">
          <div class="mdl-card__title">
            <h3 class="mdl-card__title-text"> 
              {% if t[4] %}
                <a href="{{ url_for(t[4]) }}">{{t[0]}}</a>
              {% else %}
                {{t[0]}}
              {% endif %}
            </h3>
            <div class="mdl-card__date">Date: {{t[3]}}</div>
          </div>
          <div class="mdl-card__actions mdl-card--border"></div>
          <div class="mdl-card__text-background">
            <div class="mdl-card__supporting-text">
              {% if t[7] %}
              <p>
              <div class="mdl-card__media">
                  <img src="{{ url_for('static', filename=t[7])}}"  width="500"/>
              </div>
              </p>
              {% endif %}
              {{t[2]}}
            </div>
            <div class="mdl-card__supporting-chips">
              {% for c in t[5] %}
                <span class="mdl-chip">
                  <span class="mdl-chip__text">{{c}}</span>
                </span>
              {% endfor %}
            </div>
          </div>
        </div>
      {% endfor %}

      <button type="button" id="backToTop" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored">
        <i class="material-icons">arrow_upward</i>
      </button>

      <script>
        const btn = document.getElementById('backToTop');
        const scroller = document.querySelector('.mdl-layout');
        const showAt = 460;

        function toggle() { 
          console.log(scroller.scrollTop)
          btn.style.display = scroller.scrollTop > showAt ? 'block' : 'none';
        }
        toggle();
        scroller.addEventListener('scroll', toggle, { passive: true });

        btn.addEventListener('click', function () {
          document.getElementById('top-anchor').scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        });
      </script>
    </div>
  </main>


  <style>
    #backToTop {
      position: fixed;
      bottom: 30px;
      right: 30px;
      display: none;
      z-index: 999;
    }
  </style>
  {% endblock %}

<style>
  html, body, .mdl-layout__content { scroll-behavior: smooth; }
</style>